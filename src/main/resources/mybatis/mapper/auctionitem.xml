<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qunar.qauction.dao.AuctionDetailDao">

    <!--查询商品的详细信息 商品id，商品名称，卖家信息，结束时间，起拍价格，加价幅度，成色，拍卖次数，当前价格，浏览人数,图片-->
    <resultMap id="AuctionDetail" type="com.qunar.qauction.model.auctiondetails.vo.AuctionDetail">
        <result column="item_Id" property="itemId"/>
        <result column="item_name" property="itemName"/>
        <result column="seller_qtalk" property="sellerQtalk"/>
        <result column="start_time" property="startTime" typeHandler="DateTimeTypeHandler"/>
        <result column="end_time" property="endTime" typeHandler="DateTimeTypeHandler"/>
        <result column="start_price" property="startPrice" typeHandler="MoneyTypeHandler"/>
        <result column="step_price" property="stepPrice" typeHandler="MoneyTypeHandler"/>
        <result column="old_degree" property="oldDegree"  typeHandler="EnumTypeHandler"/>
        <result column="state" property="state"  typeHandler="CodeEnumTypeHandler"/>
        <result column="current_price" property="auctionPrice" typeHandler="MoneyTypeHandler"/>
        <result column="auction_count" property="auctionCount"/>
        <result column="browse_count" property="browseCount"/>


    </resultMap>
    <resultMap id="AuctionItem" type="com.qunar.qauction.model.auctiondetails.AuctionMoney">
        <result column="item_Id" property="itemId"/>
        <result column="step_price" property="stepPrice" jdbcType="DECIMAL" javaType="qunar.api.pojo.Money"
                typeHandler="com.qunar.qauction.dao.typeHandler.MoneyTypeHandler"/>
        <result column="reserve_price" property="reservePrice" jdbcType="DECIMAL" javaType="qunar.api.pojo.Money"
                typeHandler="com.qunar.qauction.dao.typeHandler.MoneyTypeHandler"/>
        <result column="start_price" property="startPrice" jdbcType="DECIMAL" javaType="qunar.api.pojo.Money"
                typeHandler="com.qunar.qauction.dao.typeHandler.MoneyTypeHandler"/>
    </resultMap>
    <select id="queryAuctionDetail" parameterType="String" resultMap="AuctionDetail">
        SELECT unfinished_item_fixed_info.item_id,
        item_name,
        seller_qtalk,
        start_time,
        end_time,
        start_price,
        step_price,
        old_degree,
        current_price,
        auction_count,
        browse_count,
        state
        FROM
        unfinished_item_fixed_info
        LEFT JOIN
        unfinished_item_dynamic_info
        ON unfinished_item_fixed_info.item_id=unfinished_item_dynamic_info.item_id
        WHERE unfinished_item_fixed_info.item_id=#{itemId}
    </select>


    <select id="queryAuctionItem" parameterType="String" resultMap="AuctionItem">
        SELECT item_id,step_price,reserve_price,start_price FROM unfinished_item_fixed_info
        WHERE item_id=#{itemId}
    </select>


</mapper>